(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.KintoClient = f()}})(function(){var define,module,exports;return (function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/array/from"),__esModule:!0};

},{"core-js/library/fn/array/from":22}],2:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/get-iterator"),__esModule:!0};

},{"core-js/library/fn/get-iterator":23}],3:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/is-iterable"),__esModule:!0};

},{"core-js/library/fn/is-iterable":24}],4:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/assign"),__esModule:!0};

},{"core-js/library/fn/object/assign":25}],5:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/create"),__esModule:!0};

},{"core-js/library/fn/object/create":26}],6:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/define-property"),__esModule:!0};

},{"core-js/library/fn/object/define-property":27}],7:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/set-prototype-of"),__esModule:!0};

},{"core-js/library/fn/object/set-prototype-of":28}],8:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/promise"),__esModule:!0};

},{"core-js/library/fn/promise":29}],9:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/symbol"),__esModule:!0};

},{"core-js/library/fn/symbol":30}],10:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/symbol/iterator"),__esModule:!0};

},{"core-js/library/fn/symbol/iterator":31}],11:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _promise=require("../core-js/promise"),_promise2=_interopRequireDefault(_promise);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(e){return function(){var r=e.apply(this,arguments);return new _promise2.default(function(e,t){return function n(u,o){try{var i=r[u](o),s=i.value}catch(e){return void t(e)}if(!i.done)return _promise2.default.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}};

},{"../core-js/promise":8}],12:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};

},{}],13:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _defineProperty=require("../core-js/object/define-property"),_defineProperty2=_interopRequireDefault(_defineProperty);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,_defineProperty2.default)(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();

},{"../core-js/object/define-property":6}],14:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _defineProperty=require("../core-js/object/define-property"),_defineProperty2=_interopRequireDefault(_defineProperty);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(e,r,t){return r in e?(0,_defineProperty2.default)(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e};

},{"../core-js/object/define-property":6}],15:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _assign=require("../core-js/object/assign"),_assign2=_interopRequireDefault(_assign);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=_assign2.default||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e};

},{"../core-js/object/assign":4}],16:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _setPrototypeOf=require("../core-js/object/set-prototype-of"),_setPrototypeOf2=_interopRequireDefault(_setPrototypeOf),_create=require("../core-js/object/create"),_create2=_interopRequireDefault(_create),_typeof2=require("../helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,_typeof3.default)(t)));e.prototype=(0,_create2.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(e,t):e.__proto__=t)};

},{"../core-js/object/create":5,"../core-js/object/set-prototype-of":7,"../helpers/typeof":20}],17:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _typeof2=require("../helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,_typeof3.default)(t))&&"function"!=typeof t?e:t};

},{"../helpers/typeof":20}],18:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _isIterable2=require("../core-js/is-iterable"),_isIterable3=_interopRequireDefault(_isIterable2),_getIterator2=require("../core-js/get-iterator"),_getIterator3=_interopRequireDefault(_getIterator2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(){return function(e,r){if(Array.isArray(e))return e;if((0,_isIterable3.default)(Object(e)))return function(e,r){var t=[],a=!0,i=!1,u=void 0;try{for(var n,o=(0,_getIterator3.default)(e);!(a=(n=o.next()).done)&&(t.push(n.value),!r||t.length!==r);a=!0);}catch(e){i=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw u}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();

},{"../core-js/get-iterator":2,"../core-js/is-iterable":3}],19:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _from=require("../core-js/array/from"),_from2=_interopRequireDefault(_from);function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}exports.default=function(r){return Array.isArray(r)?r:(0,_from2.default)(r)};

},{"../core-js/array/from":1}],20:[function(require,module,exports){
"use strict";exports.__esModule=!0;var _iterator=require("../core-js/symbol/iterator"),_iterator2=_interopRequireDefault(_iterator),_symbol=require("../core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_typeof="function"==typeof _symbol2.default&&"symbol"==typeof _iterator2.default?function(t){return typeof t}:function(t){return t&&"function"==typeof _symbol2.default&&t.constructor===_symbol2.default&&t!==_symbol2.default.prototype?"symbol":typeof t};function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.default="function"==typeof _symbol2.default&&"symbol"===_typeof(_iterator2.default)?function(t){return void 0===t?"undefined":_typeof(t)}:function(t){return t&&"function"==typeof _symbol2.default&&t.constructor===_symbol2.default&&t!==_symbol2.default.prototype?"symbol":void 0===t?"undefined":_typeof(t)};

},{"../core-js/symbol":9,"../core-js/symbol/iterator":10}],21:[function(require,module,exports){
module.exports=require("regenerator-runtime");

},{"regenerator-runtime":124}],22:[function(require,module,exports){
require("../../modules/es6.string.iterator"),require("../../modules/es6.array.from"),module.exports=require("../../modules/_core").Array.from;

},{"../../modules/_core":39,"../../modules/es6.array.from":108,"../../modules/es6.string.iterator":116}],23:[function(require,module,exports){
require("../modules/web.dom.iterable"),require("../modules/es6.string.iterator"),module.exports=require("../modules/core.get-iterator");

},{"../modules/core.get-iterator":106,"../modules/es6.string.iterator":116,"../modules/web.dom.iterable":122}],24:[function(require,module,exports){
require("../modules/web.dom.iterable"),require("../modules/es6.string.iterator"),module.exports=require("../modules/core.is-iterable");

},{"../modules/core.is-iterable":107,"../modules/es6.string.iterator":116,"../modules/web.dom.iterable":122}],25:[function(require,module,exports){
require("../../modules/es6.object.assign"),module.exports=require("../../modules/_core").Object.assign;

},{"../../modules/_core":39,"../../modules/es6.object.assign":110}],26:[function(require,module,exports){
require("../../modules/es6.object.create");var $Object=require("../../modules/_core").Object;module.exports=function(e,r){return $Object.create(e,r)};

},{"../../modules/_core":39,"../../modules/es6.object.create":111}],27:[function(require,module,exports){
require("../../modules/es6.object.define-property");var $Object=require("../../modules/_core").Object;module.exports=function(e,r,o){return $Object.defineProperty(e,r,o)};

},{"../../modules/_core":39,"../../modules/es6.object.define-property":112}],28:[function(require,module,exports){
require("../../modules/es6.object.set-prototype-of"),module.exports=require("../../modules/_core").Object.setPrototypeOf;

},{"../../modules/_core":39,"../../modules/es6.object.set-prototype-of":113}],29:[function(require,module,exports){
require("../modules/es6.object.to-string"),require("../modules/es6.string.iterator"),require("../modules/web.dom.iterable"),require("../modules/es6.promise"),require("../modules/es7.promise.finally"),require("../modules/es7.promise.try"),module.exports=require("../modules/_core").Promise;

},{"../modules/_core":39,"../modules/es6.object.to-string":114,"../modules/es6.promise":115,"../modules/es6.string.iterator":116,"../modules/es7.promise.finally":118,"../modules/es7.promise.try":119,"../modules/web.dom.iterable":122}],30:[function(require,module,exports){
require("../../modules/es6.symbol"),require("../../modules/es6.object.to-string"),require("../../modules/es7.symbol.async-iterator"),require("../../modules/es7.symbol.observable"),module.exports=require("../../modules/_core").Symbol;

},{"../../modules/_core":39,"../../modules/es6.object.to-string":114,"../../modules/es6.symbol":117,"../../modules/es7.symbol.async-iterator":120,"../../modules/es7.symbol.observable":121}],31:[function(require,module,exports){
require("../../modules/es6.string.iterator"),require("../../modules/web.dom.iterable"),module.exports=require("../../modules/_wks-ext").f("iterator");

},{"../../modules/_wks-ext":103,"../../modules/es6.string.iterator":116,"../../modules/web.dom.iterable":122}],32:[function(require,module,exports){
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};

},{}],33:[function(require,module,exports){
module.exports=function(){};

},{}],34:[function(require,module,exports){
module.exports=function(o,n,r,i){if(!(o instanceof n)||void 0!==i&&i in o)throw TypeError(r+": incorrect invocation!");return o};

},{}],35:[function(require,module,exports){
var isObject=require("./_is-object");module.exports=function(e){if(!isObject(e))throw TypeError(e+" is not an object!");return e};

},{"./_is-object":59}],36:[function(require,module,exports){
var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(e){return function(t,o,r){var n,u=toIObject(t),i=toLength(u.length),f=toAbsoluteIndex(r,i);if(e&&o!=o){for(;i>f;)if((n=u[f++])!=n)return!0}else for(;i>f;f++)if((e||f in u)&&u[f]===o)return e||f||0;return!e&&-1}};

},{"./_to-absolute-index":95,"./_to-iobject":97,"./_to-length":98}],37:[function(require,module,exports){
var cof=require("./_cof"),TAG=require("./_wks")("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(t,e){try{return t[e]}catch(t){}};module.exports=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=tryGet(e=Object(t),TAG))?r:ARG?cof(e):"Object"==(n=cof(e))&&"function"==typeof e.callee?"Arguments":n};

},{"./_cof":38,"./_wks":104}],38:[function(require,module,exports){
var toString={}.toString;module.exports=function(t){return toString.call(t).slice(8,-1)};

},{}],39:[function(require,module,exports){
var core=module.exports={version:"2.5.3"};"number"==typeof __e&&(__e=core);

},{}],40:[function(require,module,exports){
"use strict";var $defineProperty=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=function(e,r,t){r in e?$defineProperty.f(e,r,createDesc(0,t)):e[r]=t};

},{"./_object-dp":72,"./_property-desc":84}],41:[function(require,module,exports){
var aFunction=require("./_a-function");module.exports=function(n,r,t){if(aFunction(n),void 0===r)return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,u){return n.call(r,t,u)};case 3:return function(t,u,e){return n.call(r,t,u,e)}}return function(){return n.apply(r,arguments)}};

},{"./_a-function":32}],42:[function(require,module,exports){
module.exports=function(o){if(null==o)throw TypeError("Can't call method on  "+o);return o};

},{}],43:[function(require,module,exports){
module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});

},{"./_fails":48}],44:[function(require,module,exports){
var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(e){return is?document.createElement(e):{}};

},{"./_global":50,"./_is-object":59}],45:[function(require,module,exports){
module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");

},{}],46:[function(require,module,exports){
var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie");module.exports=function(e){var r=getKeys(e),t=gOPS.f;if(t)for(var o,u=t(e),g=pIE.f,i=0;u.length>i;)g.call(e,o=u[i++])&&r.push(o);return r};

},{"./_object-gops":77,"./_object-keys":80,"./_object-pie":81}],47:[function(require,module,exports){
var global=require("./_global"),core=require("./_core"),ctx=require("./_ctx"),hide=require("./_hide"),PROTOTYPE="prototype",$export=function(e,r,t){var o,n,p,i=e&$export.F,x=e&$export.G,c=e&$export.S,l=e&$export.P,u=e&$export.B,a=e&$export.W,$=x?core:core[r]||(core[r]={}),P=$[PROTOTYPE],f=x?global:c?global[r]:(global[r]||{})[PROTOTYPE];for(o in x&&(t=r),t)(n=!i&&f&&void 0!==f[o])&&o in $||(p=n?f[o]:t[o],$[o]=x&&"function"!=typeof f[o]?t[o]:u&&n?ctx(p,global):a&&f[o]==p?function(e){var r=function(r,t,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,t)}return new e(r,t,o)}return e.apply(this,arguments)};return r[PROTOTYPE]=e[PROTOTYPE],r}(p):l&&"function"==typeof p?ctx(Function.call,p):p,l&&(($.virtual||($.virtual={}))[o]=p,e&$export.R&&P&&!P[o]&&hide(P,o,p)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export;

},{"./_core":39,"./_ctx":41,"./_global":50,"./_hide":52}],48:[function(require,module,exports){
module.exports=function(r){try{return!!r()}catch(r){return!0}};

},{}],49:[function(require,module,exports){
var ctx=require("./_ctx"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),anObject=require("./_an-object"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method"),BREAK={},RETURN={},exports=module.exports=function(e,r,t,o,i){var n,a,R,c,l=i?function(){return e}:getIterFn(e),u=ctx(t,o,r?2:1),E=0;if("function"!=typeof l)throw TypeError(e+" is not iterable!");if(isArrayIter(l)){for(n=toLength(e.length);n>E;E++)if((c=r?u(anObject(a=e[E])[0],a[1]):u(e[E]))===BREAK||c===RETURN)return c}else for(R=l.call(e);!(a=R.next()).done;)if((c=call(R,u,a.value,r))===BREAK||c===RETURN)return c};exports.BREAK=BREAK,exports.RETURN=RETURN;

},{"./_an-object":35,"./_ctx":41,"./_is-array-iter":57,"./_iter-call":60,"./_to-length":98,"./core.get-iterator-method":105}],50:[function(require,module,exports){
var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global);

},{}],51:[function(require,module,exports){
var hasOwnProperty={}.hasOwnProperty;module.exports=function(r,e){return hasOwnProperty.call(r,e)};

},{}],52:[function(require,module,exports){
var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(e,r,t){return dP.f(e,r,createDesc(1,t))}:function(e,r,t){return e[r]=t,e};

},{"./_descriptors":43,"./_object-dp":72,"./_property-desc":84}],53:[function(require,module,exports){
var document=require("./_global").document;module.exports=document&&document.documentElement;

},{"./_global":50}],54:[function(require,module,exports){
module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a});

},{"./_descriptors":43,"./_dom-create":44,"./_fails":48}],55:[function(require,module,exports){
module.exports=function(e,r,l){var a=void 0===l;switch(r.length){case 0:return a?e():e.call(l);case 1:return a?e(r[0]):e.call(l,r[0]);case 2:return a?e(r[0],r[1]):e.call(l,r[0],r[1]);case 3:return a?e(r[0],r[1],r[2]):e.call(l,r[0],r[1],r[2]);case 4:return a?e(r[0],r[1],r[2],r[3]):e.call(l,r[0],r[1],r[2],r[3])}return e.apply(l,r)};

},{}],56:[function(require,module,exports){
var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==cof(e)?e.split(""):Object(e)};

},{"./_cof":38}],57:[function(require,module,exports){
var Iterators=require("./_iterators"),ITERATOR=require("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(r){return void 0!==r&&(Iterators.Array===r||ArrayProto[ITERATOR]===r)};

},{"./_iterators":65,"./_wks":104}],58:[function(require,module,exports){
var cof=require("./_cof");module.exports=Array.isArray||function(r){return"Array"==cof(r)};

},{"./_cof":38}],59:[function(require,module,exports){
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};

},{}],60:[function(require,module,exports){
var anObject=require("./_an-object");module.exports=function(r,t,e,a){try{return a?t(anObject(e)[0],e[1]):t(e)}catch(t){var c=r.return;throw void 0!==c&&anObject(c.call(r)),t}};

},{"./_an-object":35}],61:[function(require,module,exports){
"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this}),module.exports=function(r,t,e){r.prototype=create(IteratorPrototype,{next:descriptor(1,e)}),setToStringTag(r,t+" Iterator")};

},{"./_hide":52,"./_object-create":71,"./_property-desc":84,"./_set-to-string-tag":89,"./_wks":104}],62:[function(require,module,exports){
"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),has=require("./_has"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(e,r,t,i,n,o,s){$iterCreate(t,r,i);var u,a,T,R=function(e){if(!BUGGY&&e in f)return f[e];switch(e){case KEYS:case VALUES:return function(){return new t(this,e)}}return function(){return new t(this,e)}},A=r+" Iterator",E=n==VALUES,c=!1,f=e.prototype,h=f[ITERATOR]||f[FF_ITERATOR]||n&&f[n],I=!BUGGY&&h||R(n),p=n?E?R("entries"):I:void 0,_="Array"==r&&f.entries||h;if(_&&(T=getPrototypeOf(_.call(new e)))!==Object.prototype&&T.next&&(setToStringTag(T,A,!0),LIBRARY||has(T,ITERATOR)||hide(T,ITERATOR,returnThis)),E&&h&&h.name!==VALUES&&(c=!0,I=function(){return h.call(this)}),LIBRARY&&!s||!BUGGY&&!c&&f[ITERATOR]||hide(f,ITERATOR,I),Iterators[r]=I,Iterators[A]=returnThis,n)if(u={values:E?I:R(VALUES),keys:o?I:R(KEYS),entries:p},s)for(a in u)a in f||redefine(f,a,u[a]);else $export($export.P+$export.F*(BUGGY||c),r,u);return u};

},{"./_export":47,"./_has":51,"./_hide":52,"./_iter-create":61,"./_iterators":65,"./_library":66,"./_object-gpo":78,"./_redefine":86,"./_set-to-string-tag":89,"./_wks":104}],63:[function(require,module,exports){
var ITERATOR=require("./_wks")("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(r){}module.exports=function(r,t){if(!t&&!SAFE_CLOSING)return!1;var n=!1;try{var e=[7],u=e[ITERATOR]();u.next=function(){return{done:n=!0}},e[ITERATOR]=function(){return u},r(e)}catch(r){}return n};

},{"./_wks":104}],64:[function(require,module,exports){
module.exports=function(e,n){return{value:n,done:!!e}};

},{}],65:[function(require,module,exports){
module.exports={};

},{}],66:[function(require,module,exports){
module.exports=!0;

},{}],67:[function(require,module,exports){
var META=require("./_uid")("meta"),isObject=require("./_is-object"),has=require("./_has"),setDesc=require("./_object-dp").f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(e){setDesc(e,META,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(e,t){if(!isObject(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!has(e,META)){if(!isExtensible(e))return"F";if(!t)return"E";setMeta(e)}return e[META].i},getWeak=function(e,t){if(!has(e,META)){if(!isExtensible(e))return!0;if(!t)return!1;setMeta(e)}return e[META].w},onFreeze=function(e){return FREEZE&&meta.NEED&&isExtensible(e)&&!has(e,META)&&setMeta(e),e},meta=module.exports={KEY:META,NEED:!1,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze};

},{"./_fails":48,"./_has":51,"./_is-object":59,"./_object-dp":72,"./_uid":101}],68:[function(require,module,exports){
var global=require("./_global"),macrotask=require("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==require("./_cof")(process);module.exports=function(){var e,o,r,a=function(){var a,s;for(isNode&&(a=process.domain)&&a.exit();e;){s=e.fn,e=e.next;try{s()}catch(a){throw e?r():o=void 0,a}}o=void 0,a&&a.enter()};if(isNode)r=function(){process.nextTick(a)};else if(!Observer||global.navigator&&global.navigator.standalone)if(Promise&&Promise.resolve){var s=Promise.resolve();r=function(){s.then(a)}}else r=function(){macrotask.call(global,a)};else{var t=!0,i=document.createTextNode("");new Observer(a).observe(i,{characterData:!0}),r=function(){i.data=t=!t}}return function(a){var s={fn:a,next:void 0};o&&(o.next=s),e||(e=s,r()),o=s}};

},{"./_cof":38,"./_global":50,"./_task":94}],69:[function(require,module,exports){
"use strict";var aFunction=require("./_a-function");function PromiseCapability(i){var o,r;this.promise=new i(function(i,t){if(void 0!==o||void 0!==r)throw TypeError("Bad Promise constructor");o=i,r=t}),this.resolve=aFunction(o),this.reject=aFunction(r)}module.exports.f=function(i){return new PromiseCapability(i)};

},{"./_a-function":32}],70:[function(require,module,exports){
"use strict";var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie"),toObject=require("./_to-object"),IObject=require("./_iobject"),$assign=Object.assign;module.exports=!$assign||require("./_fails")(function(){var e={},t={},r=Symbol(),s="abcdefghijklmnopqrst";return e[r]=7,s.split("").forEach(function(e){t[e]=e}),7!=$assign({},e)[r]||Object.keys($assign({},t)).join("")!=s})?function(e,t){for(var r=toObject(e),s=arguments.length,i=1,o=gOPS.f,c=pIE.f;s>i;)for(var n,a=IObject(arguments[i++]),g=o?getKeys(a).concat(o(a)):getKeys(a),b=g.length,j=0;b>j;)c.call(a,n=g[j++])&&(r[n]=a[n]);return r}:$assign;

},{"./_fails":48,"./_iobject":56,"./_object-gops":77,"./_object-keys":80,"./_object-pie":81,"./_to-object":99}],71:[function(require,module,exports){
var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var e,t=require("./_dom-create")("iframe"),r=enumBugKeys.length;for(t.style.display="none",require("./_html").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),createDict=e.F;r--;)delete createDict[PROTOTYPE][enumBugKeys[r]];return createDict()};module.exports=Object.create||function(e,t){var r;return null!==e?(Empty[PROTOTYPE]=anObject(e),r=new Empty,Empty[PROTOTYPE]=null,r[IE_PROTO]=e):r=createDict(),void 0===t?r:dPs(r,t)};

},{"./_an-object":35,"./_dom-create":44,"./_enum-bug-keys":45,"./_html":53,"./_object-dps":73,"./_shared-key":90}],72:[function(require,module,exports){
var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(e,r,t){if(anObject(e),r=toPrimitive(r,!0),anObject(t),IE8_DOM_DEFINE)try{return dP(e,r,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[r]=t.value),e};

},{"./_an-object":35,"./_descriptors":43,"./_ie8-dom-define":54,"./_to-primitive":100}],73:[function(require,module,exports){
var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(e,r){anObject(e);for(var t,o=getKeys(r),c=o.length,i=0;c>i;)dP.f(e,t=o[i++],r[t]);return e};

},{"./_an-object":35,"./_descriptors":43,"./_object-dp":72,"./_object-keys":80}],74:[function(require,module,exports){
var pIE=require("./_object-pie"),createDesc=require("./_property-desc"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),has=require("./_has"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function(e,r){if(e=toIObject(e),r=toPrimitive(r,!0),IE8_DOM_DEFINE)try{return gOPD(e,r)}catch(e){}if(has(e,r))return createDesc(!pIE.f.call(e,r),e[r])};

},{"./_descriptors":43,"./_has":51,"./_ie8-dom-define":54,"./_object-pie":81,"./_property-desc":84,"./_to-iobject":97,"./_to-primitive":100}],75:[function(require,module,exports){
var toIObject=require("./_to-iobject"),gOPN=require("./_object-gopn").f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return gOPN(e)}catch(e){return windowNames.slice()}};module.exports.f=function(e){return windowNames&&"[object Window]"==toString.call(e)?getWindowNames(e):gOPN(toIObject(e))};

},{"./_object-gopn":76,"./_to-iobject":97}],76:[function(require,module,exports){
var $keys=require("./_object-keys-internal"),hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(e){return $keys(e,hiddenKeys)};

},{"./_enum-bug-keys":45,"./_object-keys-internal":79}],77:[function(require,module,exports){
exports.f=Object.getOwnPropertySymbols;

},{}],78:[function(require,module,exports){
var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(t){return t=toObject(t),has(t,IE_PROTO)?t[IE_PROTO]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ObjectProto:null};

},{"./_has":51,"./_shared-key":90,"./_to-object":99}],79:[function(require,module,exports){
var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(!1),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(r,e){var a,t=toIObject(r),u=0,O=[];for(a in t)a!=IE_PROTO&&has(t,a)&&O.push(a);for(;e.length>u;)has(t,a=e[u++])&&(~arrayIndexOf(O,a)||O.push(a));return O};

},{"./_array-includes":36,"./_has":51,"./_shared-key":90,"./_to-iobject":97}],80:[function(require,module,exports){
var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function(e){return $keys(e,enumBugKeys)};

},{"./_enum-bug-keys":45,"./_object-keys-internal":79}],81:[function(require,module,exports){
exports.f={}.propertyIsEnumerable;

},{}],82:[function(require,module,exports){
module.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}};

},{}],83:[function(require,module,exports){
var anObject=require("./_an-object"),isObject=require("./_is-object"),newPromiseCapability=require("./_new-promise-capability");module.exports=function(e,r){if(anObject(e),isObject(r)&&r.constructor===e)return r;var i=newPromiseCapability.f(e);return(0,i.resolve)(r),i.promise};

},{"./_an-object":35,"./_is-object":59,"./_new-promise-capability":69}],84:[function(require,module,exports){
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};

},{}],85:[function(require,module,exports){
var hide=require("./_hide");module.exports=function(e,r,i){for(var d in r)i&&e[d]?e[d]=r[d]:hide(e,d,r[d]);return e};

},{"./_hide":52}],86:[function(require,module,exports){
module.exports=require("./_hide");

},{"./_hide":52}],87:[function(require,module,exports){
var isObject=require("./_is-object"),anObject=require("./_an-object"),check=function(t,e){if(anObject(t),!isObject(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,c){try{(c=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return check(t,r),e?t.__proto__=r:c(t,r),t}}({},!1):void 0),check:check};

},{"./_an-object":35,"./_ctx":41,"./_is-object":59,"./_object-gopd":74}],88:[function(require,module,exports){
"use strict";var global=require("./_global"),core=require("./_core"),dP=require("./_object-dp"),DESCRIPTORS=require("./_descriptors"),SPECIES=require("./_wks")("species");module.exports=function(e){var r="function"==typeof core[e]?core[e]:global[e];DESCRIPTORS&&r&&!r[SPECIES]&&dP.f(r,SPECIES,{configurable:!0,get:function(){return this}})};

},{"./_core":39,"./_descriptors":43,"./_global":50,"./_object-dp":72,"./_wks":104}],89:[function(require,module,exports){
var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(e,r,o){e&&!has(e=o?e:e.prototype,TAG)&&def(e,TAG,{configurable:!0,value:r})};

},{"./_has":51,"./_object-dp":72,"./_wks":104}],90:[function(require,module,exports){
var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(e){return shared[e]||(shared[e]=uid(e))};

},{"./_shared":91,"./_uid":101}],91:[function(require,module,exports){
var global=require("./_global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(o){return store[o]||(store[o]={})};

},{"./_global":50}],92:[function(require,module,exports){
var anObject=require("./_an-object"),aFunction=require("./_a-function"),SPECIES=require("./_wks")("species");module.exports=function(e,n){var r,t=anObject(e).constructor;return void 0===t||null==(r=anObject(t)[SPECIES])?n:aFunction(r)};

},{"./_a-function":32,"./_an-object":35,"./_wks":104}],93:[function(require,module,exports){
var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(e){return function(r,t){var n,i,d=String(defined(r)),o=toInteger(t),u=d.length;return o<0||o>=u?e?"":void 0:(n=d.charCodeAt(o))<55296||n>56319||o+1===u||(i=d.charCodeAt(o+1))<56320||i>57343?e?d.charAt(o):n:e?d.slice(o,o+2):i-56320+(n-55296<<10)+65536}};

},{"./_defined":42,"./_to-integer":96}],94:[function(require,module,exports){
var defer,channel,port,ctx=require("./_ctx"),invoke=require("./_invoke"),html=require("./_html"),cel=require("./_dom-create"),global=require("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function(){var e=+this;if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},listener=function(e){run.call(e.data)};setTask&&clearTask||(setTask=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return queue[++counter]=function(){invoke("function"==typeof e?e:Function(e),t)},defer(counter),counter},clearTask=function(e){delete queue[e]},"process"==require("./_cof")(process)?defer=function(e){process.nextTick(ctx(run,e,1))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(ctx(run,e,1))}:MessageChannel?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(e){global.postMessage(e+"","*")},global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(e){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(e)}}:function(e){setTimeout(ctx(run,e,1),0)}),module.exports={set:setTask,clear:clearTask};

},{"./_cof":38,"./_ctx":41,"./_dom-create":44,"./_global":50,"./_html":53,"./_invoke":55}],95:[function(require,module,exports){
var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(e,t){return(e=toInteger(e))<0?max(e+t,0):min(e,t)};

},{"./_to-integer":96}],96:[function(require,module,exports){
var ceil=Math.ceil,floor=Math.floor;module.exports=function(o){return isNaN(o=+o)?0:(o>0?floor:ceil)(o)};

},{}],97:[function(require,module,exports){
var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(e){return IObject(defined(e))};

},{"./_defined":42,"./_iobject":56}],98:[function(require,module,exports){
var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(e){return e>0?min(toInteger(e),9007199254740991):0};

},{"./_to-integer":96}],99:[function(require,module,exports){
var defined=require("./_defined");module.exports=function(e){return Object(defined(e))};

},{"./_defined":42}],100:[function(require,module,exports){
var isObject=require("./_is-object");module.exports=function(t,e){if(!isObject(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!isObject(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!isObject(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!isObject(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")};

},{"./_is-object":59}],101:[function(require,module,exports){
var id=0,px=Math.random();module.exports=function(o){return"Symbol(".concat(void 0===o?"":o,")_",(++id+px).toString(36))};

},{}],102:[function(require,module,exports){
var global=require("./_global"),core=require("./_core"),LIBRARY=require("./_library"),wksExt=require("./_wks-ext"),defineProperty=require("./_object-dp").f;module.exports=function(e){var r=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==e.charAt(0)||e in r||defineProperty(r,e,{value:wksExt.f(e)})};

},{"./_core":39,"./_global":50,"./_library":66,"./_object-dp":72,"./_wks-ext":103}],103:[function(require,module,exports){
exports.f=require("./_wks");

},{"./_wks":104}],104:[function(require,module,exports){
var store=require("./_shared")("wks"),uid=require("./_uid"),Symbol=require("./_global").Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(o){return store[o]||(store[o]=USE_SYMBOL&&Symbol[o]||(USE_SYMBOL?Symbol:uid)("Symbol."+o))};$exports.store=store;

},{"./_global":50,"./_shared":91,"./_uid":101}],105:[function(require,module,exports){
var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(r){if(null!=r)return r[ITERATOR]||r["@@iterator"]||Iterators[classof(r)]};

},{"./_classof":37,"./_core":39,"./_iterators":65,"./_wks":104}],106:[function(require,module,exports){
var anObject=require("./_an-object"),get=require("./core.get-iterator-method");module.exports=require("./_core").getIterator=function(e){var r=get(e);if("function"!=typeof r)throw TypeError(e+" is not iterable!");return anObject(r.call(e))};

},{"./_an-object":35,"./_core":39,"./core.get-iterator-method":105}],107:[function(require,module,exports){
var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").isIterable=function(r){var e=Object(r);return void 0!==e[ITERATOR]||"@@iterator"in e||Iterators.hasOwnProperty(classof(e))};

},{"./_classof":37,"./_core":39,"./_iterators":65,"./_wks":104}],108:[function(require,module,exports){
"use strict";var ctx=require("./_ctx"),$export=require("./_export"),toObject=require("./_to-object"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),toLength=require("./_to-length"),createProperty=require("./_create-property"),getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var r,t,o,i,a=toObject(e),c="function"==typeof this?this:Array,n=arguments.length,l=n>1?arguments[1]:void 0,u=void 0!==l,y=0,p=getIterFn(a);if(u&&(l=ctx(l,n>2?arguments[2]:void 0,2)),null==p||c==Array&&isArrayIter(p))for(t=new c(r=toLength(a.length));r>y;y++)createProperty(t,y,u?l(a[y],y):a[y]);else for(i=p.call(a),t=new c;!(o=i.next()).done;y++)createProperty(t,y,u?call(i,l,[o.value,y],!0):o.value);return t.length=y,t}});

},{"./_create-property":40,"./_ctx":41,"./_export":47,"./_is-array-iter":57,"./_iter-call":60,"./_iter-detect":63,"./_to-length":98,"./_to-object":99,"./core.get-iterator-method":105}],109:[function(require,module,exports){
"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(e,t){this._t=toIObject(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,s=this._i++;return!e||s>=e.length?(this._t=void 0,step(1)):step(0,"keys"==t?s:"values"==t?e[s]:[s,e[s]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");

},{"./_add-to-unscopables":33,"./_iter-define":62,"./_iter-step":64,"./_iterators":65,"./_to-iobject":97}],110:[function(require,module,exports){
var $export=require("./_export");$export($export.S+$export.F,"Object",{assign:require("./_object-assign")});

},{"./_export":47,"./_object-assign":70}],111:[function(require,module,exports){
var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")});

},{"./_export":47,"./_object-create":71}],112:[function(require,module,exports){
var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f});

},{"./_descriptors":43,"./_export":47,"./_object-dp":72}],113:[function(require,module,exports){
var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set});

},{"./_export":47,"./_set-proto":87}],114:[function(require,module,exports){

},{}],115:[function(require,module,exports){
"use strict";var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=require("./_library"),global=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export=require("./_export"),isObject=require("./_is-object"),aFunction=require("./_a-function"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor=require("./_species-constructor"),task=require("./_task").set,microtask=require("./_microtask")(),newPromiseCapabilityModule=require("./_new-promise-capability"),perform=require("./_perform"),promiseResolve=require("./_promise-resolve"),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var e=$Promise.resolve(1),r=(e.constructor={})[require("./_wks")("species")]=function(e){e(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&e.then(empty)instanceof r}catch(e){}}(),isThenable=function(e){var r;return!(!isObject(e)||"function"!=typeof(r=e.then))&&r},notify=function(e,r){if(!e._n){e._n=!0;var i=e._c;microtask(function(){for(var t=e._v,o=1==e._s,n=0,s=function(r){var i,n,s=o?r.ok:r.fail,a=r.resolve,c=r.reject,l=r.domain;try{s?(o||(2==e._h&&onHandleUnhandled(e),e._h=1),!0===s?i=t:(l&&l.enter(),i=s(t),l&&l.exit()),i===r.promise?c(TypeError("Promise-chain cycle")):(n=isThenable(i))?n.call(i,a,c):a(i)):c(t)}catch(e){c(e)}};i.length>n;)s(i[n++]);e._c=[],e._n=!1,r&&!e._h&&onUnhandled(e)})}},onUnhandled=function(e){task.call(global,function(){var r,i,t,o=e._v,n=isUnhandled(e);if(n&&(r=perform(function(){isNode?process.emit("unhandledRejection",o,e):(i=global.onunhandledrejection)?i({promise:e,reason:o}):(t=global.console)&&t.error&&t.error("Unhandled promise rejection",o)}),e._h=isNode||isUnhandled(e)?2:1),e._a=void 0,n&&r.e)throw r.v})},isUnhandled=function(e){return 1!==e._h&&0===(e._a||e._c).length},onHandleUnhandled=function(e){task.call(global,function(){var r;isNode?process.emit("rejectionHandled",e):(r=global.onrejectionhandled)&&r({promise:e,reason:e._v})})},$reject=function(e){var r=this;r._d||(r._d=!0,(r=r._w||r)._v=e,r._s=2,r._a||(r._a=r._c.slice()),notify(r,!0))},$resolve=function(e){var r,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw TypeError("Promise can't be resolved itself");(r=isThenable(e))?microtask(function(){var t={_w:i,_d:!1};try{r.call(e,ctx($resolve,t,1),ctx($reject,t,1))}catch(e){$reject.call(t,e)}}):(i._v=e,i._s=1,notify(i,!1))}catch(e){$reject.call({_w:i,_d:!1},e)}}};USE_NATIVE||($Promise=function(e){anInstance(this,$Promise,PROMISE,"_h"),aFunction(e),Internal.call(this);try{e(ctx($resolve,this,1),ctx($reject,this,1))}catch(e){$reject.call(this,e)}},(Internal=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=require("./_redefine-all")($Promise.prototype,{then:function(e,r){var i=newPromiseCapability(speciesConstructor(this,$Promise));return i.ok="function"!=typeof e||e,i.fail="function"==typeof r&&r,i.domain=isNode?process.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&notify(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal;this.promise=e,this.resolve=ctx($resolve,e,1),this.reject=ctx($reject,e,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(e){return e===$Promise||e===Wrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),require("./_set-to-string-tag")($Promise,PROMISE),require("./_set-species")(PROMISE),Wrapper=require("./_core")[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function(e){var r=newPromiseCapability(this);return(0,r.reject)(e),r.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(e){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,e)}}),$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")(function(e){$Promise.all(e).catch(empty)})),PROMISE,{all:function(e){var r=this,i=newPromiseCapability(r),t=i.resolve,o=i.reject,n=perform(function(){var i=[],n=0,s=1;forOf(e,!1,function(e){var a=n++,c=!1;i.push(void 0),s++,r.resolve(e).then(function(e){c||(c=!0,i[a]=e,--s||t(i))},o)}),--s||t(i)});return n.e&&o(n.v),i.promise},race:function(e){var r=this,i=newPromiseCapability(r),t=i.reject,o=perform(function(){forOf(e,!1,function(e){r.resolve(e).then(i.resolve,t)})});return o.e&&t(o.v),i.promise}});

},{"./_a-function":32,"./_an-instance":34,"./_classof":37,"./_core":39,"./_ctx":41,"./_export":47,"./_for-of":49,"./_global":50,"./_is-object":59,"./_iter-detect":63,"./_library":66,"./_microtask":68,"./_new-promise-capability":69,"./_perform":82,"./_promise-resolve":83,"./_redefine-all":85,"./_set-species":88,"./_set-to-string-tag":89,"./_species-constructor":92,"./_task":94,"./_wks":104}],116:[function(require,module,exports){
"use strict";var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,i=this._t,e=this._i;return e>=i.length?{value:void 0,done:!0}:(t=$at(i,e),this._i+=t.length,{value:t,done:!1})});

},{"./_iter-define":62,"./_string-at":93}],117:[function(require,module,exports){
"use strict";var global=require("./_global"),has=require("./_has"),DESCRIPTORS=require("./_descriptors"),$export=require("./_export"),redefine=require("./_redefine"),META=require("./_meta").KEY,$fails=require("./_fails"),shared=require("./_shared"),setToStringTag=require("./_set-to-string-tag"),uid=require("./_uid"),wks=require("./_wks"),wksExt=require("./_wks-ext"),wksDefine=require("./_wks-define"),enumKeys=require("./_enum-keys"),isArray=require("./_is-array"),anObject=require("./_an-object"),isObject=require("./_is-object"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),createDesc=require("./_property-desc"),_create=require("./_object-create"),gOPNExt=require("./_object-gopn-ext"),$GOPD=require("./_object-gopd"),$DP=require("./_object-dp"),$keys=require("./_object-keys"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(e,r,t){var o=gOPD(ObjectProto,r);o&&delete ObjectProto[r],dP(e,r,t),o&&e!==ObjectProto&&dP(ObjectProto,r,o)}:dP,wrap=function(e){var r=AllSymbols[e]=_create($Symbol[PROTOTYPE]);return r._k=e,r},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof $Symbol},$defineProperty=function(e,r,t){return e===ObjectProto&&$defineProperty(OPSymbols,r,t),anObject(e),r=toPrimitive(r,!0),anObject(t),has(AllSymbols,r)?(t.enumerable?(has(e,HIDDEN)&&e[HIDDEN][r]&&(e[HIDDEN][r]=!1),t=_create(t,{enumerable:createDesc(0,!1)})):(has(e,HIDDEN)||dP(e,HIDDEN,createDesc(1,{})),e[HIDDEN][r]=!0),setSymbolDesc(e,r,t)):dP(e,r,t)},$defineProperties=function(e,r){anObject(e);for(var t,o=enumKeys(r=toIObject(r)),i=0,s=o.length;s>i;)$defineProperty(e,t=o[i++],r[t]);return e},$create=function(e,r){return void 0===r?_create(e):$defineProperties(_create(e),r)},$propertyIsEnumerable=function(e){var r=isEnum.call(this,e=toPrimitive(e,!0));return!(this===ObjectProto&&has(AllSymbols,e)&&!has(OPSymbols,e))&&(!(r||!has(this,e)||!has(AllSymbols,e)||has(this,HIDDEN)&&this[HIDDEN][e])||r)},$getOwnPropertyDescriptor=function(e,r){if(e=toIObject(e),r=toPrimitive(r,!0),e!==ObjectProto||!has(AllSymbols,r)||has(OPSymbols,r)){var t=gOPD(e,r);return!t||!has(AllSymbols,r)||has(e,HIDDEN)&&e[HIDDEN][r]||(t.enumerable=!0),t}},$getOwnPropertyNames=function(e){for(var r,t=gOPN(toIObject(e)),o=[],i=0;t.length>i;)has(AllSymbols,r=t[i++])||r==HIDDEN||r==META||o.push(r);return o},$getOwnPropertySymbols=function(e){for(var r,t=e===ObjectProto,o=gOPN(t?OPSymbols:toIObject(e)),i=[],s=0;o.length>s;)!has(AllSymbols,r=o[s++])||t&&!has(ObjectProto,r)||i.push(AllSymbols[r]);return i};USE_NATIVE||(redefine(($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var e=uid(arguments.length>0?arguments[0]:void 0),r=function(t){this===ObjectProto&&r.call(OPSymbols,t),has(this,HIDDEN)&&has(this[HIDDEN],e)&&(this[HIDDEN][e]=!1),setSymbolDesc(this,e,createDesc(1,t))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,e,{configurable:!0,set:r}),wrap(e)})[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames,require("./_object-pie").f=$propertyIsEnumerable,require("./_object-gops").f=$getOwnPropertySymbols,DESCRIPTORS&&!require("./_library")&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(e){return wrap(wks(e))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(e){return has(SymbolRegistry,e+="")?SymbolRegistry[e]:SymbolRegistry[e]=$Symbol(e)},keyFor:function(e){if(!isSymbol(e))throw TypeError(e+" is not a symbol!");for(var r in SymbolRegistry)if(SymbolRegistry[r]===e)return r},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var e=$Symbol();return"[null]"!=_stringify([e])||"{}"!=_stringify({a:e})||"{}"!=_stringify(Object(e))})),"JSON",{stringify:function(e){for(var r,t,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(t=r=o[1],(isObject(r)||void 0!==e)&&!isSymbol(e))return isArray(r)||(r=function(e,r){if("function"==typeof t&&(r=t.call(this,e,r)),!isSymbol(r))return r}),o[1]=r,_stringify.apply($JSON,o)}}),$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0);

},{"./_an-object":35,"./_descriptors":43,"./_enum-keys":46,"./_export":47,"./_fails":48,"./_global":50,"./_has":51,"./_hide":52,"./_is-array":58,"./_is-object":59,"./_library":66,"./_meta":67,"./_object-create":71,"./_object-dp":72,"./_object-gopd":74,"./_object-gopn":76,"./_object-gopn-ext":75,"./_object-gops":77,"./_object-keys":80,"./_object-pie":81,"./_property-desc":84,"./_redefine":86,"./_set-to-string-tag":89,"./_shared":91,"./_to-iobject":97,"./_to-primitive":100,"./_uid":101,"./_wks":104,"./_wks-define":102,"./_wks-ext":103}],118:[function(require,module,exports){
"use strict";var $export=require("./_export"),core=require("./_core"),global=require("./_global"),speciesConstructor=require("./_species-constructor"),promiseResolve=require("./_promise-resolve");$export($export.P+$export.R,"Promise",{finally:function(e){var r=speciesConstructor(this,core.Promise||global.Promise),o="function"==typeof e;return this.then(o?function(o){return promiseResolve(r,e()).then(function(){return o})}:e,o?function(o){return promiseResolve(r,e()).then(function(){throw o})}:e)}});

},{"./_core":39,"./_export":47,"./_global":50,"./_promise-resolve":83,"./_species-constructor":92}],119:[function(require,module,exports){
"use strict";var $export=require("./_export"),newPromiseCapability=require("./_new-promise-capability"),perform=require("./_perform");$export($export.S,"Promise",{try:function(r){var e=newPromiseCapability.f(this),i=perform(r);return(i.e?e.reject:e.resolve)(i.v),e.promise}});

},{"./_export":47,"./_new-promise-capability":69,"./_perform":82}],120:[function(require,module,exports){
require("./_wks-define")("asyncIterator");

},{"./_wks-define":102}],121:[function(require,module,exports){
require("./_wks-define")("observable");

},{"./_wks-define":102}],122:[function(require,module,exports){
require("./es6.array.iterator");for(var global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),TO_STRING_TAG=require("./_wks")("toStringTag"),DOMIterables="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}

},{"./_global":50,"./_hide":52,"./_iterators":65,"./_wks":104,"./es6.array.iterator":109}],123:[function(require,module,exports){
var objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var hasDefineProperty,defaultMaxListeners=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(e){hasDefineProperty=!1}function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function emitNone(e,t,n){if(t)e.call(n);else for(var r=e.length,i=arrayClone(e,r),s=0;s<r;++s)i[s].call(n)}function emitOne(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].call(n,r)}function emitTwo(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=arrayClone(e,s),a=0;a<s;++a)o[a].call(n,r,i)}function emitThree(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=arrayClone(e,o),l=0;l<o;++l)a[l].call(n,r,i,s)}function emitMany(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].apply(n,r)}function _addListener(e,t,n,r){var i,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=objectCreate(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=$getMaxListeners(e))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else o=s[t]=n,++e._eventsCount;return e}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=bind.call(onceWrapper,r);return i.listener=n,r.wrapFn=i,i}function listenerCount(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function spliceOne(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function arrayClone(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function objectCreatePolyfill(e){var t=function(){};return t.prototype=e,new t}function objectKeysPolyfill(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n}function functionBindPolyfill(e){var t=this;return function(){return t.apply(e,arguments)}}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=e}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(e){var t,n,r,i,s,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:emitNone(n,u,this);break;case 2:emitOne(n,u,this,arguments[1]);break;case 3:emitTwo(n,u,this,arguments[1],arguments[2]);break;case 4:emitThree(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];emitMany(n,u,this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=objectCreate(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():spliceOne(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=objectCreate(null):delete n[e]),this;if(0===arguments.length){var i,s=objectKeys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:unwrapListeners(t):[]},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};

},{}],124:[function(require,module,exports){
var g=function(){return this}()||Function("return this")(),hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0,oldRuntime=hadRuntime&&g.regeneratorRuntime;if(g.regeneratorRuntime=void 0,module.exports=require("./runtime"),hadRuntime)g.regeneratorRuntime=oldRuntime;else try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=void 0}

},{"./runtime":125}],125:[function(require,module,exports){
!function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof module,h=t.regeneratorRuntime;if(h)u&&(module.exports=h);else{(h=t.regeneratorRuntime=u?module.exports:{}).wrap=w;var s="suspendedStart",f="suspendedYield",l="executing",p="completed",y={},v={};v[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(P([])));g&&g!==e&&n.call(g,i)&&(v=g);var m=b.prototype=x.prototype=Object.create(v);E.prototype=m.constructor=b,b.constructor=E,b[c]=E.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===E||"GeneratorFunction"===(r.displayName||r.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},h.awrap=function(t){return{__await:t}},_(j.prototype),j.prototype[a]=function(){return this},h.AsyncIterator=j,h.async=function(t,r,e,n){var o=new j(w(t,r,e,n));return h.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(m),m[c]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},h.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},h.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(G),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function w(t,r,e,n){var o=r&&r.prototype instanceof x?r:x,i=Object.create(o.prototype),a=new N(n||[]);return i._invoke=function(t,r,e){var n=s;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===s)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=L(t,r,e);if("normal"===u.type){if(n=e.done?p:f,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function L(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}function x(){}function E(){}function b(){}function _(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function j(t){var r;this._invoke=function(e,o){function i(){return new Promise(function(r,i){!function r(e,o,i,a){var c=L(t[e],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},a)}a(c.arg)}(e,o,r,i)})}return r=r?r.then(i,i):i()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=L(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")());

},{}],126:[function(require,module,exports){
var v1=require("./v1"),v4=require("./v4"),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid;

},{"./v1":129,"./v4":130}],127:[function(require,module,exports){
for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid(e,t){var o=t||0,i=byteToHex;return i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]}module.exports=bytesToUuid;

},{}],128:[function(require,module,exports){
var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function(){return getRandomValues(rnds8),rnds8}}else{var rnds=new Array(16);module.exports=function(){for(var r,n=0;n<16;n++)0==(3&n)&&(r=4294967296*Math.random()),rnds[n]=r>>>((3&n)<<3)&255;return rnds}}

},{}],129:[function(require,module,exports){
var _nodeId,_clockseq,rng=require("./lib/rng"),bytesToUuid=require("./lib/bytesToUuid"),_lastMSecs=0,_lastNSecs=0;function v1(e,s,c){var l=s&&c||0,o=s||[],r=(e=e||{}).node||_nodeId,n=void 0!==e.clockseq?e.clockseq:_clockseq;if(null==r||null==n){var t=rng();null==r&&(r=_nodeId=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==n&&(n=_clockseq=16383&(t[6]<<8|t[7]))}var a=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,i=a-_lastMSecs+(d-_lastNSecs)/1e4;if(i<0&&void 0===e.clockseq&&(n=n+1&16383),(i<0||a>_lastMSecs)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=a,_lastNSecs=d,_clockseq=n;var u=(1e4*(268435455&(a+=122192928e5))+d)%4294967296;o[l++]=u>>>24&255,o[l++]=u>>>16&255,o[l++]=u>>>8&255,o[l++]=255&u;var v=a/4294967296*1e4&268435455;o[l++]=v>>>8&255,o[l++]=255&v,o[l++]=v>>>24&15|16,o[l++]=v>>>16&255,o[l++]=n>>>8|128,o[l++]=255&n;for(var _=0;_<6;++_)o[l+_]=r[_];return s||bytesToUuid(o)}module.exports=v1;

},{"./lib/bytesToUuid":127,"./lib/rng":128}],130:[function(require,module,exports){
var rng=require("./lib/rng"),bytesToUuid=require("./lib/bytesToUuid");function v4(r,n,e){var i=n&&e||0;"string"==typeof r&&(n="binary"===r?new Array(16):null,r=null);var u=(r=r||{}).random||(r.rng||rng)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,n)for(var o=0;o<16;++o)n[i+o]=u[o];return n||bytesToUuid(u)}module.exports=v4;

},{"./lib/bytesToUuid":127,"./lib/rng":128}],131:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.SUPPORTED_PROTOCOL_VERSION=void 0;var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_desc,_value,_class,_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_utils=require("./utils"),_http=require("./http"),_http2=_interopRequireDefault(_http),_endpoint=require("./endpoint"),_endpoint2=_interopRequireDefault(_endpoint),_requests=require("./requests"),requests=_interopRequireWildcard(_requests),_batch=require("./batch"),_bucket=require("./bucket"),_bucket2=_interopRequireDefault(_bucket);function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var s={};return Object.keys(n).forEach(function(e){s[e]=n[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}var SUPPORTED_PROTOCOL_VERSION=exports.SUPPORTED_PROTOCOL_VERSION="v1",KintoClientBase=(_dec=(0,_utils.nobatch)("This operation is not supported within a batch operation."),_dec2=(0,_utils.nobatch)("This operation is not supported within a batch operation."),_dec3=(0,_utils.nobatch)("This operation is not supported within a batch operation."),_dec4=(0,_utils.nobatch)("This operation is not supported within a batch operation."),_dec5=(0,_utils.nobatch)("Can't use batch within a batch!"),_dec6=(0,_utils.capable)(["permissions_endpoint"]),_dec7=(0,_utils.support)("1.4","2.0"),_applyDecoratedDescriptor((_class=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_classCallCheck3.default)(this,e),"string"!=typeof t||!t.length)throw new Error("Invalid remote URL: "+t);"/"===t[t.length-1]&&(t=t.slice(0,-1)),this._backoffReleaseTime=null,this._requests=[],this._isBatch=!!r.batch,this._retry=r.retry||0,this._safe=!!r.safe,this._headers=r.headers||{},this.remote=t,this.serverInfo=null,this.events=r.events;var n=r.requestMode,a=r.timeout;this.http=new _http2.default(this.events,{requestMode:n,timeout:a}),this._registerHTTPEvents()}return(0,_createClass3.default)(e,[{key:"_registerHTTPEvents",value:function(){var e=this;this._isBatch||this.events.on("backoff",function(t){e._backoffReleaseTime=t})}},{key:"bucket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new _bucket2.default(this,e,{batch:this._isBatch,headers:this._getHeaders(t),safe:this._getSafe(t),retry:this._getRetry(t)})}},{key:"setHeaders",value:function(e){this._headers=(0,_extends3.default)({},this._headers,e),this.serverInfo=null}},{key:"_getHeaders",value:function(e){return(0,_extends3.default)({},this._headers,e.headers)}},{key:"_getSafe",value:function(e){return(0,_extends3.default)({safe:this._safe},e).safe}},{key:"_getRetry",value:function(e){return(0,_extends3.default)({retry:this._retry},e).retry}},{key:"_getHello",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.remote+(0,_endpoint2.default)("root"),e.next=3,this.http.request(t,{headers:this._getHeaders(a)},{retry:this._getRetry(a)});case 3:return r=e.sent,n=r.json,e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchServerInfo",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.serverInfo){e.next=2;break}return e.abrupt("return",this.serverInfo);case 2:return e.next=4,this._getHello({retry:this._getRetry(t)});case 4:return this.serverInfo=e.sent,e.abrupt("return",this.serverInfo);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchServerSettings",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchServerInfo(t);case 2:return r=e.sent,n=r.settings,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchServerCapabilities",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchServerInfo(n);case 2:return t=e.sent,r=t.capabilities,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchUser",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getHello(n);case 2:return t=e.sent,r=t.user,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchHTTPApiVersion",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchServerInfo(n);case 2:return t=e.sent,r=t.http_api_version,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_batchRequests",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,n,a,s,i,u,o=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._getHeaders(c),t.length){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this.fetchServerSettings({retry:this._getRetry(c)});case 5:if(n=e.sent,!((a=n.batch_max_requests)&&t.length>a)){e.next=10;break}return s=(0,_utils.partition)(t,a),e.abrupt("return",(0,_utils.pMap)(s,function(e){return o._batchRequests(e,c)}));case 10:return e.next=12,this.execute({headers:r,path:(0,_endpoint2.default)("batch"),method:"POST",body:{defaults:{headers:r},requests:t}},{retry:this._getRetry(c)});case 12:return i=e.sent,u=i.responses,e.abrupt("return",u);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"batch",value:function(){var t=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function t(r){var n,a,s,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e(this.remote,{events:this.events,batch:!0,safe:this._getSafe(u),retry:this._getRetry(u)}),a=void 0,s=void 0,u.bucket&&(a=n.bucket(u.bucket),u.collection&&(s=a.collection(u.collection))),r(s||a||n),t.next=7,this._batchRequests(n._requests,u);case 7:if(i=t.sent,!u.aggregate){t.next=12;break}return t.abrupt("return",(0,_batch.aggregate)(i,n._requests));case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"execute",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,n,a,s,i,u,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.raw,n=void 0!==r&&r,a=o.stringify,s=void 0===a||a,!this._isBatch){e.next=5;break}return this._requests.push(t),i="This result is generated from within a batch operation and should not be consumed.",e.abrupt("return",n?{json:i,headers:{get:function(){}}}:i);case 5:return e.next=7,this.http.request(this.remote+t.path,(0,_utils.cleanUndefinedProperties)({method:t.method,headers:t.headers,body:s?JSON.stringify(t.body):t.body}),{retry:this._getRetry(o)});case 7:return u=e.sent,e.abrupt("return",n?u:u.json);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"paginatedList",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t,r){var n,a,s,i,u,o,c,l,p,f,d,h,_,v=this,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,_extends3.default)({sort:"-last_modified"},r),a=n.sort,s=n.filters,i=n.limit,u=n.pages,!(o=n.since)||"string"==typeof o){e.next=3;break}throw new Error("Invalid value for since ("+o+"), should be ETag value.");case 3:return c=(0,_utils.qsify)((0,_extends3.default)({},s,{_sort:a,_limit:i,_since:o})),l=[],p=0,f=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Pagination exhausted.");case 2:return e.abrupt("return",d(t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.headers,e.t0=_,e.next=4,v.http.request(t,{headers:r});case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}},e,v)}));return function(t){return e.apply(this,arguments)}}(),h=function(e,t,r,n){return{last_modified:r?r.replace(/"/g,""):r,data:e,next:f.bind(null,t),hasNextPage:!!t,totalRecords:n}},_=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,n,a,s=t.headers,i=t.json;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.get("Next-Page"),n=s.get("ETag"),a=parseInt(s.get("Total-Records"),10),u){e.next=5;break}return e.abrupt("return",h(i.data,r,n,a));case 5:if(l=l.concat(i.data),!((p+=1)>=u)&&r){e.next=9;break}return e.abrupt("return",h(l,r,n,a));case 9:return e.abrupt("return",d(r));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.t0=_,e.next=12,this.execute({headers:y.headers,path:t+"?"+c},{raw:!0,retry:y.retry||0});case 12:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 14:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"listPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("permissions"),r=(0,_extends3.default)({sort:"id"},n),e.abrupt("return",this.paginatedList(t,r,{headers:this._getHeaders(n),retry:this._getRetry(n)}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listBuckets",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("bucket"),e.abrupt("return",this.paginatedList(t,r,{headers:this._getHeaders(r),retry:this._getRetry(r)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createBucket",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,n,a,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.data,n=void 0===r?{}:r,a=i.permissions,null!=t&&(n.id=t),s=n.id?(0,_endpoint2.default)("bucket",n.id):(0,_endpoint2.default)("bucket"),e.abrupt("return",this.execute(requests.createRequest(s,{data:n,permissions:a},{headers:this._getHeaders(i),safe:this._getSafe(i)}),{retry:this._getRetry(i)}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBucket",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,n,a,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=(0,_utils.toDataBody)(t)).id){e.next=3;break}throw new Error("A bucket id is required.");case 3:return n=(0,_endpoint2.default)("bucket",r.id),a=(0,_extends3.default)({},r,i),s=a.last_modified,e.abrupt("return",this.execute(requests.deleteRequest(n,{last_modified:s,headers:this._getHeaders(i),safe:this._getSafe(i)}),{retry:this._getRetry(i)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBuckets",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("bucket"),e.abrupt("return",this.execute(requests.deleteRequest(t,{last_modified:r.last_modified,headers:this._getHeaders(r),safe:this._getSafe(r)}),{retry:this._getRetry(r)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remote",get:function(){return this._remote},set:function(e){var t=void 0;try{t=e.match(/\/(v\d+)\/?$/)[1]}catch(t){throw new Error("The remote URL must contain the version: "+e)}if(t!==SUPPORTED_PROTOCOL_VERSION)throw new Error("Unsupported protocol version: "+t);this._remote=e,this._version=t}},{key:"version",get:function(){return this._version}},{key:"backoff",get:function(){var e=(new Date).getTime();return this._backoffReleaseTime&&e<this._backoffReleaseTime?this._backoffReleaseTime-e:0}}]),e}()).prototype,"fetchServerSettings",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"fetchServerSettings"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"fetchServerCapabilities",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"fetchServerCapabilities"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"fetchUser",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"fetchUser"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"fetchHTTPApiVersion",[_dec4],Object.getOwnPropertyDescriptor(_class.prototype,"fetchHTTPApiVersion"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"batch",[_dec5],Object.getOwnPropertyDescriptor(_class.prototype,"batch"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"listPermissions",[_dec6],Object.getOwnPropertyDescriptor(_class.prototype,"listPermissions"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"deleteBuckets",[_dec7],Object.getOwnPropertyDescriptor(_class.prototype,"deleteBuckets"),_class.prototype),_class);exports.default=KintoClientBase;

},{"./batch":132,"./bucket":133,"./endpoint":135,"./http":137,"./requests":139,"./utils":140,"babel-runtime/helpers/asyncToGenerator":11,"babel-runtime/helpers/classCallCheck":12,"babel-runtime/helpers/createClass":13,"babel-runtime/helpers/extends":15,"babel-runtime/regenerator":21}],132:[function(require,module,exports){
"use strict";function aggregate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.length!==t.length)throw new Error("Responses length should match requests one.");return e.reduce(function(e,r,s){var o=r.status,i=t[s];if(o>=200&&o<400)e.published.push(r.body);else if(404===o){var l=i.path.match(/(buckets|groups|collections|records)\/([^/]+)$/),n=3===l.length?l[2]:void 0;e.skipped.push({id:n,path:i.path,error:r.body})}else 412===o?e.conflicts.push({type:"outgoing",local:i.body,remote:r.body.details&&r.body.details.existing||null}):e.errors.push({path:i.path,sent:i,error:r.body});return e},{errors:[],published:[],conflicts:[],skipped:[]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.aggregate=aggregate;

},{}],133:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_desc,_value,_class,_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_utils=require("./utils"),_collection=require("./collection"),_collection2=_interopRequireDefault(_collection),_requests=require("./requests"),requests=_interopRequireWildcard(_requests),_endpoint=require("./endpoint"),_endpoint2=_interopRequireDefault(_endpoint);function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,a,n){var s={};return Object.keys(a).forEach(function(e){s[e]=a[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}var Bucket=(_dec=(0,_utils.capable)(["history"]),_applyDecoratedDescriptor((_class=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,_classCallCheck3.default)(this,e),this.client=t,this.name=r,this._isBatch=!!a.batch,this._headers=a.headers||{},this._retry=a.retry||0,this._safe=!!a.safe}return(0,_createClass3.default)(e,[{key:"_getHeaders",value:function(e){return(0,_extends3.default)({},this._headers,e.headers)}},{key:"_getSafe",value:function(e){return(0,_extends3.default)({safe:this._safe},e).safe}},{key:"_getRetry",value:function(e){return(0,_extends3.default)({retry:this._retry},e).retry}},{key:"collection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new _collection2.default(this.client,this,e,{batch:this._isBatch,headers:this._getHeaders(t),retry:this._getRetry(t),safe:this._getSafe(t)})}},{key:"getData",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:this._getHeaders(n),path:(0,_endpoint2.default)("bucket",this.name)},e.next=3,this.client.execute(t,{retry:this._getRetry(n)});case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o,c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A bucket object is required.");case 2:return r=(0,_extends3.default)({},t,{id:this.name}),a=r.id,"default"===r.id&&delete r.id,n=(0,_endpoint2.default)("bucket",a),s=l.patch,i=l.permissions,u=(0,_extends3.default)({},t,l),o=u.last_modified,c=requests.updateRequest(n,{data:r,permissions:i},{last_modified:o,patch:s,headers:this._getHeaders(l),safe:this._getSafe(l)}),e.abrupt("return",this.client.execute(c,{retry:this._getRetry(l)}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listHistory",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("history",this.name),e.abrupt("return",this.client.paginatedList(t,r,{headers:this._getHeaders(r),retry:this._getRetry(r)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listCollections",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("collection",this.name),e.abrupt("return",this.client.paginatedList(t,r,{headers:this._getHeaders(r),retry:this._getRetry(r)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createCollection",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.permissions,a=u.data,(n=void 0===a?{}:a).id=t,s=(0,_endpoint2.default)("collection",this.name,t),i=requests.createRequest(s,{data:n,permissions:r},{headers:this._getHeaders(u),safe:this._getSafe(u)}),e.abrupt("return",this.client.execute(i,{retry:this._getRetry(u)}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCollection",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=(0,_utils.toDataBody)(t)).id){e.next=3;break}throw new Error("A collection id is required.");case 3:return a=r.id,n=(0,_extends3.default)({},r,o),s=n.last_modified,i=(0,_endpoint2.default)("collection",this.name,a),u=requests.deleteRequest(i,{last_modified:s,headers:this._getHeaders(o),safe:this._getSafe(o)}),e.abrupt("return",this.client.execute(u,{retry:this._getRetry(o)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listGroups",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("group",this.name),e.abrupt("return",this.client.paginatedList(t,r,{headers:this._getHeaders(r),retry:this._getRetry(r)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getGroup",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:this._getHeaders(a),path:(0,_endpoint2.default)("group",this.name,t)},e.abrupt("return",this.client.execute(r,{retry:this._getRetry(a)}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createGroup",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,_extends3.default)({},u.data,{id:t,members:i}),a=(0,_endpoint2.default)("group",this.name,t),n=u.permissions,s=requests.createRequest(a,{data:r,permissions:n},{headers:this._getHeaders(u),safe:this._getSafe(u)}),e.abrupt("return",this.client.execute(s,{retry:this._getRetry(u)}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateGroup",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A group object is required.");case 2:if(t.id){e.next=4;break}throw new Error("A group id is required.");case 4:return r=(0,_extends3.default)({},c.data,t),a=(0,_endpoint2.default)("group",this.name,t.id),n=c.patch,s=c.permissions,i=(0,_extends3.default)({},r,c),u=i.last_modified,o=requests.updateRequest(a,{data:r,permissions:s},{last_modified:u,patch:n,headers:this._getHeaders(c),safe:this._getSafe(c)}),e.abrupt("return",this.client.execute(o,{retry:this._getRetry(c)}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,_utils.toDataBody)(t),a=r.id,n=(0,_extends3.default)({},r,o),s=n.last_modified,i=(0,_endpoint2.default)("group",this.name,a),u=requests.deleteRequest(i,{last_modified:s,headers:this._getHeaders(o),safe:this._getSafe(o)}),e.abrupt("return",this.client.execute(u,{retry:this._getRetry(o)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:this._getHeaders(n),path:(0,_endpoint2.default)("bucket",this.name)},e.next=3,this.client.execute(t,{retry:this._getRetry(n)});case 3:return r=e.sent,a=r.permissions,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A permissions object is required.");case 2:return r=(0,_endpoint2.default)("bucket",this.name),a=i.last_modified,n={last_modified:a},s=requests.updateRequest(r,{data:n,permissions:t},{headers:this._getHeaders(i),safe:this._getSafe(i)}),e.abrupt("return",this.client.execute(s,{retry:this._getRetry(i)}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A permissions object is required.");case 2:return r=(0,_endpoint2.default)("bucket",this.name),a=s.last_modified,n=requests.jsonPatchPermissionsRequest(r,t,"add",{last_modified:a,headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removePermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A permissions object is required.");case 2:return r=(0,_endpoint2.default)("bucket",this.name),a=s.last_modified,n=requests.jsonPatchPermissionsRequest(r,t,"remove",{last_modified:a,headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"batch",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.batch(t,{bucket:this.name,headers:this._getHeaders(r),retry:this._getRetry(r),safe:this._getSafe(r),aggregate:!!r.aggregate}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()).prototype,"listHistory",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"listHistory"),_class.prototype),_class);exports.default=Bucket;

},{"./collection":134,"./endpoint":135,"./requests":139,"./utils":140,"babel-runtime/helpers/asyncToGenerator":11,"babel-runtime/helpers/classCallCheck":12,"babel-runtime/helpers/createClass":13,"babel-runtime/helpers/extends":15,"babel-runtime/regenerator":21}],134:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_desc,_value,_class,_slicedToArray2=require("babel-runtime/helpers/slicedToArray"),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_uuid=require("uuid"),_utils=require("./utils"),_requests=require("./requests"),requests=_interopRequireWildcard(_requests),_endpoint=require("./endpoint"),_endpoint2=_interopRequireDefault(_endpoint);function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,a,n){var s={};return Object.keys(a).forEach(function(e){s[e]=a[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}var Collection=(_dec=(0,_utils.capable)(["attachments"]),_dec2=(0,_utils.capable)(["attachments"]),_dec3=(0,_utils.capable)(["history"]),_applyDecoratedDescriptor((_class=function(){function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,_classCallCheck3.default)(this,e),this.client=t,this.bucket=r,this.name=a,this._isBatch=!!n.batch,this._retry=n.retry||0,this._safe=!!n.safe,this._headers=(0,_extends3.default)({},this.bucket._headers,n.headers)}return(0,_createClass3.default)(e,[{key:"_getHeaders",value:function(e){return(0,_extends3.default)({},this._headers,e.headers)}},{key:"_getSafe",value:function(e){return(0,_extends3.default)({safe:this._safe},e).safe}},{key:"_getRetry",value:function(e){return(0,_extends3.default)({retry:this._retry},e).retry}},{key:"getTotalRecords",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,a,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("record",this.bucket.name,this.name),r={headers:this._getHeaders(s),path:t,method:"HEAD"},e.next=4,this.client.execute(r,{raw:!0,retry:this._getRetry(s)});case 4:return a=e.sent,n=a.headers,e.abrupt("return",parseInt(n.get("Total-Records"),10));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,a,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("collection",this.bucket.name,this.name),r={headers:this._getHeaders(s),path:t},e.next=4,this.client.execute(r,{retry:this._getRetry(s)});case 4:return a=e.sent,n=a.data,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A collection object is required.");case 2:return r=o.patch,a=o.permissions,n=(0,_extends3.default)({},t,o),s=n.last_modified,i=(0,_endpoint2.default)("collection",this.bucket.name,this.name),u=requests.updateRequest(i,{data:t,permissions:a},{last_modified:s,patch:r,headers:this._getHeaders(o),safe:this._getSafe(o)}),e.abrupt("return",this.client.execute(u,{retry:this._getRetry(o)}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,a,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_endpoint2.default)("collection",this.bucket.name,this.name),r={headers:this._getHeaders(s),path:t},e.next=4,this.client.execute(r,{retry:this._getRetry(s)});case 4:return a=e.sent,n=a.permissions,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A permissions object is required.");case 2:return r=(0,_endpoint2.default)("collection",this.bucket.name,this.name),a={last_modified:s.last_modified},n=requests.updateRequest(r,{data:a,permissions:t},{headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addPermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A permissions object is required.");case 2:return r=(0,_endpoint2.default)("collection",this.bucket.name,this.name),a=s.last_modified,n=requests.jsonPatchPermissionsRequest(r,t,"add",{last_modified:a,headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removePermissions",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A permissions object is required.");case 2:return r=(0,_endpoint2.default)("collection",this.bucket.name,this.name),a=s.last_modified,n=requests.jsonPatchPermissionsRequest(r,t,"remove",{last_modified:a,headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createRecord",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.permissions,a=(0,_endpoint2.default)("record",this.bucket.name,this.name,t.id),n=requests.createRequest(a,{data:t,permissions:r},{headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addAttachment",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.permissions,a=o.id||_uuid.v4.v4(),n=(0,_endpoint2.default)("attachment",this.bucket.name,this.name,a),s=(0,_extends3.default)({},o,c),i=s.last_modified,u=requests.addAttachmentRequest(n,t,{data:o,permissions:r},{last_modified:i,filename:c.filename,gzipped:c.gzipped,headers:this._getHeaders(c),safe:this._getSafe(c)}),e.next=7,this.client.execute(u,{stringify:!1,retry:this._getRetry(c)});case 7:return e.abrupt("return",this.getRecord(a));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeAttachment",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.last_modified,a=(0,_endpoint2.default)("attachment",this.bucket.name,this.name,t),n=requests.deleteRequest(a,{last_modified:r,headers:this._getHeaders(s),safe:this._getSafe(s)}),e.abrupt("return",this.client.execute(n,{retry:this._getRetry(s)}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateRecord",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_utils.isObject)(t)){e.next=2;break}throw new Error("A record object is required.");case 2:if(t.id){e.next=4;break}throw new Error("A record id is required.");case 4:return r=u.permissions,a=(0,_extends3.default)({},t,u),n=a.last_modified,s=(0,_endpoint2.default)("record",this.bucket.name,this.name,t.id),i=requests.updateRequest(s,{data:t,permissions:r},{headers:this._getHeaders(u),safe:this._getSafe(u),last_modified:n,patch:!!u.patch}),e.abrupt("return",this.client.execute(i,{retry:this._getRetry(u)}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRecord",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=(0,_utils.toDataBody)(t)).id){e.next=3;break}throw new Error("A record id is required.");case 3:return a=r.id,n=(0,_extends3.default)({},r,o),s=n.last_modified,i=(0,_endpoint2.default)("record",this.bucket.name,this.name,a),u=requests.deleteRequest(i,{last_modified:s,headers:this._getHeaders(o),safe:this._getSafe(o)}),e.abrupt("return",this.client.execute(u,{retry:this._getRetry(o)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRecord",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,_endpoint2.default)("record",this.bucket.name,this.name,t),a={headers:this._getHeaders(n),path:r},e.abrupt("return",this.client.execute(a,{retry:this._getRetry(n)}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listRecords",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,_endpoint2.default)("record",this.bucket.name,this.name),!r.hasOwnProperty("at")){e.next=5;break}return e.abrupt("return",this.getSnapshot(r.at));case 5:return e.abrupt("return",this.client.paginatedList(t,r,{headers:this._getHeaders(r),retry:this._getRetry(r)}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isHistoryComplete",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(){var t,r,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bucket.listHistory({limit:1,filters:{action:"create",resource_name:"collection",collection_id:this.name}});case 2:return t=e.sent,r=(0,_slicedToArray3.default)(t.data,1),a=r[0],e.abrupt("return",!!a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listChangesBackTo",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isHistoryComplete();case 2:if(e.sent){e.next=4;break}throw new Error("Computing a snapshot is only possible when the full history for a collection is available. Here, the history plugin seems to have been enabled after the creation of the collection.");case 4:return e.next=6,this.bucket.listHistory({pages:1/0,sort:"-target.data.last_modified",filters:{resource_name:"record",collection_id:this.name,"max_target.data.last_modified":String(t)}});case 6:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSnapshot",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r,a,n,s,i,u,o,c,d;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Number.isInteger(t)&&!(t<=0)){e.next=2;break}throw new Error("Invalid argument, expected a positive integer.");case 2:return e.next=4,this.listChangesBackTo(t);case 4:for(r=e.sent,a=new Set,n=[],s=!0,i=!1,u=void 0,e.prev=10,o=function(){var e=d.value,t=e.action,r=e.target.data;"delete"==t?(a.add(r.id),n=n.filter(function(e){return e.id!==r.id})):a.has(r.id)||(a.add(r.id),n.push(r))},c=r[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)o();e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),i=!0,u=e.t0;case 19:e.prev=19,e.prev=20,!s&&c.return&&c.return();case 22:if(e.prev=22,!i){e.next=25;break}throw u;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.abrupt("return",{last_modified:String(t),data:n.sort(function(e,t){return t.last_modified-e.last_modified}),next:function(){throw new Error("Snapshots don't support pagination")},hasNextPage:!1,totalRecords:n.length});case 28:case"end":return e.stop()}},e,this,[[10,15,19,27],[20,,22,26]])}));return function(t){return e.apply(this,arguments)}}()},{key:"batch",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.batch(t,{bucket:this.bucket.name,collection:this.name,headers:this._getHeaders(r),retry:this._getRetry(r),safe:this._getSafe(r),aggregate:!!r.aggregate}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()).prototype,"addAttachment",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"addAttachment"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"removeAttachment",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"removeAttachment"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"getSnapshot",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"getSnapshot"),_class.prototype),_class);exports.default=Collection;

},{"./endpoint":135,"./requests":139,"./utils":140,"babel-runtime/helpers/asyncToGenerator":11,"babel-runtime/helpers/classCallCheck":12,"babel-runtime/helpers/createClass":13,"babel-runtime/helpers/extends":15,"babel-runtime/helpers/slicedToArray":18,"babel-runtime/regenerator":21,"uuid":126}],135:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=endpoint;var ENDPOINTS={root:function(){return"/"},batch:function(){return"/batch"},permissions:function(){return"/permissions"},bucket:function(t){return"/buckets"+(t?"/"+t:"")},history:function(t){return ENDPOINTS.bucket(t)+"/history"},collection:function(t,n){return ENDPOINTS.bucket(t)+"/collections"+(n?"/"+n:"")},group:function(t,n){return ENDPOINTS.bucket(t)+"/groups"+(n?"/"+n:"")},record:function(t,n,r){return ENDPOINTS.collection(t,n)+"/records"+(r?"/"+r:"")},attachment:function(t,n,r){return ENDPOINTS.record(t,n,r)+"/attachment"}};function endpoint(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];return ENDPOINTS[t].apply(ENDPOINTS,r)}

},{}],136:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnparseableResponseError=exports.ServerResponse=exports.NetworkTimeoutError=void 0;var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extendableBuiltin5(e){function r(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}function _extendableBuiltin3(e){function r(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}function _extendableBuiltin(e){function r(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}var ERROR_CODES={104:"Missing Authorization Token",105:"Invalid Authorization Token",106:"Request body was not valid JSON",107:"Invalid request parameter",108:"Missing request parameter",109:"Invalid posted data",110:"Invalid Token / id",111:"Missing Token / id",112:"Content-Length header was not provided",113:"Request body too large",114:"Resource was created, updated or deleted meanwhile",115:"Method not allowed on this end point (hint: server may be readonly)",116:"Requested version not available on this server",117:"Client has sent too many requests",121:"Resource access is forbidden for this user",122:"Another resource violates constraint",201:"Service Temporary unavailable due to high load",202:"Service deprecated",999:"Internal Server Error"};exports.default=ERROR_CODES;var NetworkTimeoutError=function(e){function r(e,t){(0,_classCallCheck3.default)(this,r);var o=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"Timeout while trying to access "+e+" with "+JSON.stringify(t)));return Error.captureStackTrace&&Error.captureStackTrace(o,r),o.url=e,o.options=t,o}return(0,_inherits3.default)(r,e),r}(_extendableBuiltin(Error)),UnparseableResponseError=function(e){function r(e,t,o){(0,_classCallCheck3.default)(this,r);var s=e.status,n=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"Response from server unparseable (HTTP "+(s||0)+"; "+o+"): "+t));return Error.captureStackTrace&&Error.captureStackTrace(n,r),n.status=s,n.response=e,n.stack=o.stack,n.error=o,n}return(0,_inherits3.default)(r,e),r}(_extendableBuiltin3(Error)),ServerResponse=function(e){function r(e,t){(0,_classCallCheck3.default)(this,r);var o=e.status,s=e.statusText,n=void 0;t&&(s=t.error||s,t.errno&&t.errno in ERROR_CODES?n=ERROR_CODES[t.errno]:t.message&&(n=t.message),n&&t.message&&t.message!==n&&(n+=" ("+t.message+")"));var a="HTTP "+o+" "+s;n&&(a+=": "+n);var i=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,a.trim()));return Error.captureStackTrace&&Error.captureStackTrace(i,r),i.response=e,i.data=t,i}return(0,_inherits3.default)(r,e),r}(_extendableBuiltin5(Error));exports.NetworkTimeoutError=NetworkTimeoutError,exports.ServerResponse=ServerResponse,exports.UnparseableResponseError=UnparseableResponseError;

},{"babel-runtime/helpers/classCallCheck":12,"babel-runtime/helpers/inherits":16,"babel-runtime/helpers/possibleConstructorReturn":17}],137:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_utils=require("./utils"),_errors=require("./errors");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var HTTP=function(){function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_classCallCheck3.default)(this,e),!r)throw new Error("No events handler provided");this.events=r,this.requestMode=t.requestMode||e.defaultOptions.requestMode,this.timeout=t.timeout||e.defaultOptions.timeout}return(0,_createClass3.default)(e,null,[{key:"DEFAULT_REQUEST_HEADERS",get:function(){return{Accept:"application/json","Content-Type":"application/json"}}},{key:"defaultOptions",get:function(){return{timeout:null,requestMode:"cors"}}}]),(0,_createClass3.default)(e,[{key:"timedFetch",value:function(e,r){var t=this,n=!1;return new Promise(function(a,s){var o=void 0;function u(e){return function(r){n||(o&&clearTimeout(o),e(r))}}t.timeout&&(o=setTimeout(function(){n=!0,s(new _errors.NetworkTimeoutError(e,r))},t.timeout)),fetch(e,r).then(u(a)).catch(u(s))})}},{key:"processResponse",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r){var t,n,a,s;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.status,n=r.headers,e.next=3,r.text();case 3:if(a=e.sent,s=void 0,0===a.length){e.next=13;break}e.prev=6,s=JSON.parse(a),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new _errors.UnparseableResponseError(r,a,e.t0);case 13:if(!(t>=400)){e.next=15;break}throw new _errors.ServerResponse(r,s);case 15:return e.abrupt("return",{status:t,json:s,headers:n});case 16:case"end":return e.stop()}},e,this,[[6,10]])}));return function(r){return e.apply(this,arguments)}}()},{key:"retry",value:function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t,n,a){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_utils.delay)(t);case 2:return e.abrupt("return",this.request(r,n,(0,_extends3.default)({},a,{retry:a.retry-1})));case 3:case"end":return e.stop()}},e,this)}));return function(r,t,n,a){return e.apply(this,arguments)}}()},{key:"request",value:function(){var r=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function r(t){var n,a,s,o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{headers:{}},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{retry:0};return _regenerator2.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u.headers=(0,_extends3.default)({},e.DEFAULT_REQUEST_HEADERS,u.headers),u.body&&"function"==typeof u.body.append&&delete u.headers["Content-Type"],u.mode=this.requestMode,r.next=5,this.timedFetch(t,u);case 5:if(n=r.sent,a=n.status,s=n.headers,this._checkForDeprecationHeader(s),this._checkForBackoffHeader(a,s),!((o=this._checkForRetryAfterHeader(a,s))&&i.retry>0)){r.next=14;break}return r.abrupt("return",this.retry(t,o,u,i));case 14:return r.abrupt("return",this.processResponse(n));case 15:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()},{key:"_checkForDeprecationHeader",value:function(e){var r=e.get("Alert");if(r){var t=void 0;try{t=JSON.parse(r)}catch(e){return void console.warn("Unable to parse Alert header message",r)}console.warn(t.message,t.url),this.events.emit("deprecated",t)}}},{key:"_checkForBackoffHeader",value:function(e,r){var t=void 0,n=parseInt(r.get("Backoff"),10);t=n>0?(new Date).getTime()+1e3*n:0,this.events.emit("backoff",t)}},{key:"_checkForRetryAfterHeader",value:function(e,r){var t=r.get("Retry-After");if(t){var n=1e3*parseInt(t,10);return t=(new Date).getTime()+n,this.events.emit("retry-after",t),n}}}]),e}();exports.default=HTTP;

},{"./errors":136,"./utils":140,"babel-runtime/helpers/asyncToGenerator":11,"babel-runtime/helpers/classCallCheck":12,"babel-runtime/helpers/createClass":13,"babel-runtime/helpers/extends":15,"babel-runtime/regenerator":21}],138:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_events=require("events"),_base=require("./base"),_base2=_interopRequireDefault(_base);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var KintoClient=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck3.default)(this,t);var i=r.events||new _events.EventEmitter;return(0,_possibleConstructorReturn3.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({events:i},r)))}return(0,_inherits3.default)(t,e),t}(_base2.default);exports.default=KintoClient,"object"===("undefined"==typeof module?"undefined":(0,_typeof3.default)(module))&&(module.exports=KintoClient);

},{"./base":131,"babel-runtime/helpers/classCallCheck":12,"babel-runtime/helpers/inherits":16,"babel-runtime/helpers/possibleConstructorReturn":17,"babel-runtime/helpers/typeof":20,"events":123}],139:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray2=require("babel-runtime/helpers/slicedToArray"),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2);exports.createRequest=createRequest,exports.updateRequest=updateRequest,exports.jsonPatchPermissionsRequest=jsonPatchPermissionsRequest,exports.deleteRequest=deleteRequest,exports.addAttachmentRequest=addAttachmentRequest;var _utils=require("./utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var requestDefaults={safe:!1,headers:{},permissions:void 0,data:void 0,patch:!1};function safeHeader(e,t){return e?t?{"If-Match":'"'+t+'"'}:{"If-None-Match":"*"}:{}}function createRequest(e,t){var a=t.data,s=t.permissions,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=(0,_extends3.default)({},requestDefaults,r),i=d.headers,n=d.safe;return{method:a&&a.id?"PUT":"POST",path:e,headers:(0,_extends3.default)({},i,safeHeader(n)),body:{data:a,permissions:s}}}function updateRequest(e,t){var a=t.data,s=t.permissions,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=(0,_extends3.default)({},requestDefaults,r),i=d.headers,n=d.safe,u=d.patch,o=(0,_extends3.default)({},a,r).last_modified;return 0===Object.keys((0,_utils.omit)(a,"id","last_modified")).length&&(a=void 0),{method:u?"PATCH":"PUT",path:e,headers:(0,_extends3.default)({},i,safeHeader(n,o)),body:{data:a,permissions:s}}}function jsonPatchPermissionsRequest(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(0,_extends3.default)({},requestDefaults,s),d=r.headers,i=r.safe,n=r.last_modified,u=[],o=!0,l=!1,f=void 0;try{for(var h,c=Object.entries(t)[Symbol.iterator]();!(o=(h=c.next()).done);o=!0){var p=(0,_slicedToArray3.default)(h.value,2),_=p[0],m=p[1],q=!0,v=!1,x=void 0;try{for(var y,R=m[Symbol.iterator]();!(q=(y=R.next()).done);q=!0){var b=y.value;u.push({op:a,path:"/permissions/"+_+"/"+b})}}catch(e){v=!0,x=e}finally{try{!q&&R.return&&R.return()}finally{if(v)throw x}}}}catch(e){l=!0,f=e}finally{try{!o&&c.return&&c.return()}finally{if(l)throw f}}return{method:"PATCH",path:e,headers:(0,_extends3.default)({},d,safeHeader(i,n),{"Content-Type":"application/json-patch+json"}),body:u}}function deleteRequest(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,_extends3.default)({},requestDefaults,t),s=a.headers,r=a.safe,d=a.last_modified;if(r&&!d)throw new Error("Safe concurrency check requires a last_modified value.");return{method:"DELETE",path:e,headers:(0,_extends3.default)({},s,safeHeader(r,d))}}function addAttachmentRequest(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=a.data,r=a.permissions,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,_extends3.default)({},requestDefaults,d),n=i.headers,u=i.safe,o=i.gzipped,l=(0,_extends3.default)({},s,d).last_modified,f={data:s,permissions:r},h=(0,_utils.createFormData)(t,f,d),c=null!=o?c=e+"?gzipped="+(o?"true":"false"):e;return{method:"POST",path:c,headers:(0,_extends3.default)({},n,safeHeader(u,l)),body:h}}

},{"./utils":140,"babel-runtime/helpers/extends":15,"babel-runtime/helpers/slicedToArray":18}],140:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pMap=void 0;var _defineProperty2=require("babel-runtime/helpers/defineProperty"),_defineProperty3=_interopRequireDefault(_defineProperty2),_extends3=require("babel-runtime/helpers/extends"),_extends4=_interopRequireDefault(_extends3),_toArray2=require("babel-runtime/helpers/toArray"),_toArray3=_interopRequireDefault(_toArray2),_typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),_slicedToArray2=require("babel-runtime/helpers/slicedToArray"),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),pMap=exports.pMap=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,t){var n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,r.reduce(function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,a){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return e.t0=n,e.next=5,t(a);case 5:e.t1=e.sent,n=e.t0.concat.call(e.t0,e.t1);case 7:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}(),Promise.resolve());case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}();function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function partition(e,r){return r<=0?e:e.reduce(function(e,t,n){return 0===n||n%r==0?e.push([t]):e[e.length-1].push(t),e},[])}function delay(e){return new Promise(function(r){return setTimeout(r,e)})}function omit(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return Object.keys(e).reduce(function(r,n){return t.includes(n)||(r[n]=e[n]),r},{})}function toDataBody(e){if(isObject(e))return e;if("string"==typeof e)return{id:e};throw new Error("Invalid argument.")}function qsify(e){var r,t=function(e){return encodeURIComponent("boolean"==typeof e?String(e):e)},n=(r=e,JSON.parse(JSON.stringify(r)));return Object.keys(n).map(function(e){var r=t(e)+"=";return Array.isArray(n[e])?r+n[e].map(function(e){return t(e)}).join(","):r+t(n[e])}).join("&")}function checkVersion(e,r,t){var n=function(e){return e.split(".").map(function(e){return parseInt(e,10)})},a=n(e),o=(0,_slicedToArray3.default)(a,2),i=o[0],u=o[1],c=n(r),s=(0,_slicedToArray3.default)(c,2),f=s[0],l=s[1],p=n(t),d=(0,_slicedToArray3.default)(p,2),y=d[0],b=d[1];if([i<f,i===f&&u<l,i>y,i===y&&u>=b].some(function(e){return e}))throw new Error("Version "+e+" doesn't satisfy "+r+" <= x < "+t)}function support(e,r){return function(t,n,a){var o=a.value;return{configurable:!0,get:function(){var t=this,a=function(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return("client"in t?t.client:t).fetchHTTPApiVersion().then(function(t){return checkVersion(t,e,r)}).then(function(){return o.apply(t,a)})};return Object.defineProperty(this,n,{value:a,configurable:!0,writable:!0}),a}}}}function capable(e){return function(r,t,n){var a=n.value;return{configurable:!0,get:function(){var r=this,n=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return("client"in r?r.client:r).fetchServerCapabilities().then(function(r){var t=e.filter(function(e){return!(e in r)});if(t.length>0){var n=t.join(", ");throw new Error("Required capabilities "+n+" not present on server")}}).then(function(){return a.apply(r,n)})};return Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n}}}}function nobatch(e){return function(r,t,n){var a=n.value;return{configurable:!0,get:function(){var r=this,n=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(r._isBatch)throw new Error(e);return a.apply(r,n)};return Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n}}}}function isObject(e){return"object"===(void 0===e?"undefined":(0,_typeof3.default)(e))&&null!==e&&!Array.isArray(e)}function parseDataURL(e){var r=e.match(/^data:(.*);base64,(.*)/);if(!r)throw new Error("Invalid data-url: "+String(e).substr(0,32)+"...");var t=r[1],n=r[2],a=t.split(";"),o=(0,_toArray3.default)(a),i=o[0],u=o.slice(1).reduce(function(e,r){var t=r.split("="),n=(0,_slicedToArray3.default)(t,2),a=n[0],o=n[1];return(0,_extends4.default)({},e,(0,_defineProperty3.default)({},a,o))},{});return(0,_extends4.default)({},u,{type:i,base64:n})}function extractFileInfo(e){for(var r=parseDataURL(e),t=r.name,n=r.type,a=r.base64,o=atob(a),i=[],u=0;u<o.length;u++)i.push(o.charCodeAt(u));return{blob:new Blob([new Uint8Array(i)],{type:n}),name:t}}function createFormData(e,r){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filename,n=void 0===t?"untitled":t,a=extractFileInfo(e),o=a.blob,i=a.name,u=new FormData;for(var c in u.append("attachment",o,i||n),r)void 0!==r[c]&&u.append(c,JSON.stringify(r[c]));return u}function cleanUndefinedProperties(e){var r={};for(var t in e)void 0!==e[t]&&(r[t]=e[t]);return r}exports.partition=partition,exports.delay=delay,exports.omit=omit,exports.toDataBody=toDataBody,exports.qsify=qsify,exports.checkVersion=checkVersion,exports.support=support,exports.capable=capable,exports.nobatch=nobatch,exports.isObject=isObject,exports.parseDataURL=parseDataURL,exports.extractFileInfo=extractFileInfo,exports.createFormData=createFormData,exports.cleanUndefinedProperties=cleanUndefinedProperties;

},{"babel-runtime/helpers/asyncToGenerator":11,"babel-runtime/helpers/defineProperty":14,"babel-runtime/helpers/extends":15,"babel-runtime/helpers/slicedToArray":18,"babel-runtime/helpers/toArray":19,"babel-runtime/helpers/typeof":20,"babel-runtime/regenerator":21}]},{},[138])(138)
});